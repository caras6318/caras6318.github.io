---
title: HTTP 기초
date: 2024-04-05 23:04 +0900
categories: HTTP
tags:
  - HTTP
  - Network
---
## Intro
---
저번 인터넷 네트워크 기초에 이어서 이번에는 HTTP에 대해서 알아보았다.
여러 버전이 있지만 가장 많이 사용되는 HTTP/1.1에 대해서 다루어 보려고 한다.
>아래 내용은 공부한 내용을 정리한 것으로 틀린 내용이 포함되어 있을 수 있습니다.  

## 1. HTTP(HyperText Transfer Protocol)
---
먼저 HTTP는 다음과 같은 4가지의 특징을 갖는다.

- 클라이언트 서버 구조  
	Request Response 구조  
	클라이언트는 서버에 요청을 보내고, 응답을 대기 
	서버가 요청에 대한 결과를 만들어서 응답

- 무상태 프로토콜(Stateless)
	서버가 클라이언트의 상태를 보존X 
	장점: 서버 확장성 높음(스케일 아웃) : 서버가 변경되어도 된다. 
	단점: 클라이언트가 추가 데이터 전송
>로그인과 같이 상태가 유지되어야 하는 상황이 오면 Stateless를 유지 할 수 없다.
>그래서 브라우저 쿠키나 세션을 이용해서 상태를 유지한다.

- 비연결성 
	HTTP는 기본이 연결을 유지하지 않는 모델 
	일반적으로 초 단위의 이하의 빠른 속도로 응답
	1시간 동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이 하로 매우 작음
	예) 웹 브라우저에서 계속 연속해서 검색 버튼을 누르지는 않는다. 
	서버 자원을 매우 효율적으로 사용할 수 있다.
	
	한계점
	TCP/IP 연결을 새로 맺어야 함 - 3 way handshake 시간 추가  
	웹 브라우저로 사이트를 요청하면 HTML 뿐만 아니라 자바스크립트, css, 추가 이미지 등등 수 많은 자원이 함께 다운로드  
	
	극복방법
	지금은 HTTP 지속 연결(Persistent Connections)로 문제 해결 
	HTTP/2, HTTP/3에서 더 많은 최적화
- HTTP 메시지  
- 단순함, 확장 가능

### HTTP API
---
API 설계에 있어서 가장 중요한 것은 *리소스 식별* 이다.

여기서 리소스란 회원 관리 서비스에서의 회원이라는 개념 도서판매서비스에서 도서같은 개념 그자체다.
리소스 자체를 URI에 매핑한다.

- 도서 목록 조회 /books
- 도서 등록 /books/{serialnum}
- 도서 수정 /books/{serialnum}
- 도서 삭제 /books/{serialnum}
- 도서 조회 /books/{serialnum}

단순히 리소스만 추가해서는 구별이 불가능하다. => 리소스와 행위를 분리한다.

### HTTP 메서드
---
#### 주요 메서드
	
	GET: 리소스 조회  
		데이터는 query(쿼리 파라미터, 쿼리 스트링)를 통해서 전달
		
	POST: 요청 데이터 처리, 주로 등록에 사용 
		메시지 바디를 통해 서버로 요청 데이터 전달, 서버는 해당 요청을 처리
		
	PUT: 리소스를 대체, 해당 리소스가 없으면 생성
		클라이언트가 리소스 위치를 알고 URI 지정한다는게 POST와 다르다
		
	PATCH: 리소스 부분 변경  
	
	DELETE: 리소스 삭제

#### 기타 메서드
	
	HEAD: GET과 동일하지만 메시지 부분을 제외하고, 상태 줄과 헤더만 반환
	
	OPTIONS: 대상 리소스에 대한 통신 가능 옵션(메서드)을 설명(주로 CORS에서 사용)
	
	CONNECT: 대상 리소스로 식별되는 서버에 대한 터널을 설정  
	
	TRACE: 대상 리소스에 대한 경로를 따라 메시지 루프백 테스트를 수행

#### 속성
안전(Safe Methods), 멱등(Idempotent Methods), 캐시가능(Cacheable Methods)

### API 설계
---
도서 목록 조회 /books -> GET
- 도서 등록 /books -> POST
- 도서 수정 /books/{serialnum} -> PATCH, PUT, POST
- 도서 삭제 /books/{serialnum} -> DELETE
- 도서 조회 /books/{serialnum} -> GET

### Reference
---
